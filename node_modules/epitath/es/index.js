import React from 'react';
import immutagen from 'immutagen';

export default (function (component) {
  var generator = immutagen(component);

  var compose = function compose(context) {
    var value = context.value;
    return context.next ? React.cloneElement(value, null, function (values) {
      return compose(context.next(values));
    }) : value;
  };

  function Epitath(props) {
    return compose(generator(props));
  }

  Epitath.displayName = 'EpitathContainer(' + (component.displayName || 'anonymous') + ')';

  return Epitath;
});