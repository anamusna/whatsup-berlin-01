'use strict';

exports.__esModule = true;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _immutagen = require('immutagen');

var _immutagen2 = _interopRequireDefault(_immutagen);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function (component) {
  var generator = (0, _immutagen2.default)(component);

  var compose = function compose(context) {
    var value = context.value;
    return context.next ? _react2.default.cloneElement(value, null, function (values) {
      return compose(context.next(values));
    }) : value;
  };

  function Epitath(props) {
    return compose(generator(props));
  }

  Epitath.displayName = 'EpitathContainer(' + (component.displayName || 'anonymous') + ')';

  return Epitath;
};

module.exports = exports['default'];